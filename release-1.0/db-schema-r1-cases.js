///////////////////////////////////////////////////////////////////////////////
//////CASE 1: SCHEMA DESIGNED TO HOLD DIFF. PRODUCT TYPE IN ONE RECORD SET/////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//////////////////////////////INSERT///////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//////A PRODUCT WITH VARIOUS UNIT VOL AND DIFF PRICE ACROSS STOCK//////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet1.insert(
{
	pName : "Old Cinthol",
	pTypes : [
		{
			pUnit : {
				val : "small",
				unit : "size"
			},
			pPrice : [
				{
					price : 10,
					unit : "Rs",
					dateCMU : new Date()
				},
				{
					price : 12,
					unit : "Rs",
					dateCMU : new Date()
				}
			]
		},
		{
			pUnit : {
				val : "normal",
				unit : "size"
			},
			pPrice : [
				{
					price : 23,
					unit : "Rs",
					dateCMU : new Date()
				},
                                {
					price : 25,
					unit : "Rs",
					dateCMU : new Date()
				}
			]
		}            
	]
})
///////////////////////////////////////////////////////////////////////////////
//////A PRODUCT WITH SINGLE UNIT OF VOL AND ONLY ONE VALID PRICE AT A TIME/////
///////////////////////////////////////////////////////////////////////////////
db.productSet1.insert(
{
	pName : "Sugar",
	pTypes : [
		{
			pUnit : {
				val : 1,
				unit : "kg"
			},
			pPrice : [
				{
					price : 50,
					unit : "Rs",
					dateCMU : new Date()
				}
			]
		}
	]
})
///////////////////////////////////////////////////////////////////////////////
//////////////////////////////UPDATE///////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
///xx///ADDING A NEW PRODUCT TYPE TO EXISTING LIST OF A PRODUCT////////////////
//////////DOUBLE DOLLOR ISSUE//////////////////////////////////////////////////
db.productSet1.update(
{
        pName: 'Old Cinthol',
	'pTypes.pUnit.qty':3,
	'pTypes.pUnit.val':'normal',
	'pTypes.pUnit.unit':'size',
	'pTypes.pPrice.price':70,
	'pTypes.pPrice.unit':'Rs'
},
{
        $set: {
		'pTypes.$.pPrice.$.dateCMU': new Date()
        }
},
{
	upsert:true,
	multi:true
})
///////////////////////////////////////////////////////////////////////////////
//////ADDING A NEW PRODUCT TYPE TO EXISTING LIST OF A PRODUCT//////////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet1.update(
{
        pName: 'Old Cinthol'
},
{
        $addToSet: {
                pTypes: {
                        pUnit: {
				qty: 3,
                                val: 'normal',
                                unit: 'size'
                        },
                        pPrice: [
                        {
                                price: 70,
                                unit: 'Rs',			
				dateCMU : new Date()
                        }]
                }
        }
},
{
	upsert:true,
	multi:true
})
///////////////////////////////////////////////////////////////////////////////
///xx///ADDING A NEW PRICE INFO TO EXISTING LIST OF PRICE//////////////////////
//////////////ADDING TO ZEROTH POSTION ONLY////////////////////////////////////
db.productSet1.update(
{
        pName: 'Old Cinthol',
	'pTypes.pUnit.qty':3,
	'pTypes.pUnit.val':'normal',
	'pTypes.pUnit.unit':'size',
},
{
        $addToSet: {
                'pTypes.$.pPrice': {
                        price: 65,
                        unit: 'Rs',
			dateCMU : new Date()
                }
        }
},
{
	upsert:true,
	multi:true
})
///////////////////////////////////////////////////////////////////////////////
///////UPDATING THE PRICE TO NEW VALUE OVER AN EXISTING VALUE//////////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet1.update(
{
        pName: 'Sugar',
	'pTypes.pUnit.val':1,
	'pTypes.pUnit.unit':'kg',
},
{
        $set: {
                'pTypes.$.pPrice': [{
                        price: 45,
                        unit: 'Rs',
			dateCMU : new Date()
                }]
        }
},
{
	upsert:true,
	multi:true
})
///////////////////////////////////////////////////////////////////////////////
//////CASE 2.1: SCHEMA HOLDS DIF PRODUCT TYPE IN DIFF RECORD SET //////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//////////////////////////////INSERT///////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

/////////////////////////////USE CASE - 1//////////////////////////////////////
//////A PRODUCT WITH SINGLE UNIT OF VOL AND ONLY ONE VALID PRICE AT A TIME ////
///////////////////////////////////////////////////////////////////////////////
db.productSet2.insert({
        pName: "Sugar",
        pUnit: {
                val: 1,
                unit: "kg"
        },
        pPrice: [{
                price: 50,
                unit: "Rs"
        }],
        pActive: 1,
	dateCMA : new Date()
})
/////////////////////////////USE CASE - 2//////////////////////////////////////
////A PRODUCT WITH DIFF UNIT OF VOL AND POSSIBLY MULTI PRICE OVER DIFF STOCK///
///////////////////////////////////////////////////////////////////////////////
db.productSet2.insert({
        pName: "Old Cinthol",
        pUnit: {
                val: "small",
                unit: "size"
        },
        pPrice: [{
                price: 10,
                unit: "Rs"
        }],
        pActive: 1,
	dateCMA : new Date()
})
db.productSet2.insert({
        pName: "Old Cinthol",
        pUnit: {
                val: "normal",
                unit: "size"
        },
        pPrice: [{
                price: 23,
                unit: "Rs"
        }],
        pActive: 1,
	dateCMA : new Date()
})
///////////////////////////////////////////////////////////////////////////////
//////////////////////////////UPDATE///////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

/////////////////////////////USE CASE - 3//////////////////////////////////////
//////////ADDING NEW PRICE TO EXISTING PRICE TO MAKE IT AS LIST////////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet2.update({
        pName: "Old Cinthol",
        'pUnit.val': "small",
        'pUnit.unit': "size"
}, {
        $addToSet: {
                pPrice: {
                        price: 12,
                        unit: "Rs"
                }
        },
	$set:{
		dateCMA : new Date(),
		pActive : 1
	}
}, {
        upsert: true,
        multi: true
})
/////////////////////////////USE CASE - 4//////////////////////////////////////
/////////////OVERWRITTING REVISED PRICE OVER EXISTING PRICE////////////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet2.update({
        pName: "Sugar",
        'pUnit.val': 1,
        'pUnit.unit': "kg"
}, {
        $set: {
                pPrice: [{
                        price: 45,
                        unit: "Rs"
                }],
		dateCMA : new Date(),
		pActive : 1
        }
}, {
        upsert: true,
        multi: true
})
/////////////////////////////USE CASE - 5//////////////////////////////////////
////////DELETING AN OUTDATED PRICE FROM THE LIST OF PRICES/////////////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet2.update({
        pName: "Old Cinthol",
        'pUnit.val': "small",
        'pUnit.unit': "size"
}, {
        $pull: {
                pPrice: {
                        price: 10,
                        unit: "Rs"
                }
        },
	$set:{
		dateCMA : new Date(),
		pActive : 1
	}
}, {
        upsert: true,
        multi: true
})
/////////////////////////////USE CASE - 6//////////////////////////////////////
////////UPDATE A PRODUCT DETAIL TO BE OUTDATED IN THE COLLECTION///////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet2.update({
        pName: "Old Cinthol",
        'pUnit.val': "small",
        'pUnit.unit': "size"
}, {
	$set:{
		pActive : 0,
		dateCMA : new Date()
	}
}, {
        upsert: false,
        multi: true
})
/////////////////////////////USE CASE - 7//////////////////////////////////////
/////////TRYING TO FIND AN ABSCENT PRODUCT AND GETTING INSERTED ///////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet2.update({
        pName: "Hamam",
        'pUnit.val': "big",
        'pUnit.unit': "size"
}, {
        $addToSet: {
                pPrice: {
                        price: 35,
                        unit: "Rs"
                }
        },
	$set:{
		dateCMA : new Date(),
		pActive : 1
	}
}, {
        upsert: true,
        multi: true
})
///////////////////////////////////////////////////////////////////////////////
//////CASE 2.2: SCHEMA HOLDS DIF PRODUCT TYPE IN DIFF RECORD SET //////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet3.drop()
///////////////////////////////////////////////////////////////////////////////
////USECASE 1.1 A product getting added for the first time/////////////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet3.update({
        pName: "Lux Sandal",
        'pUnit.val': "big",
        'pUnit.unit': "size"
}, {
        $addToSet: {
                pPrice: {
                        price: 55,
                        unit: "Rs"
                }
        },
	$set:{
		dateCM : new Date()
	}
}, {
        upsert: true,
        multi: true
})
///////////////////////////////////////////////////////////////////////////////
////USECASE 1.2 A product with different unit getting added for the first time/
///////////////////////////////////////////////////////////////////////////////
db.productSet3.update({
        pName: "Lux Sandal",
        'pUnit.val': "small",
        'pUnit.unit': "size"
}, {
        $addToSet: {
                pPrice: {
                        price: 25,
                        unit: "Rs"
                }
        },
	$set:{
		dateCM : new Date()
	}
}, {
        upsert: true,
        multi: true
})
///////////////////////////////////////////////////////////////////////////////
////USECASE 1.3 A product with different price getting added///////////////////
///////////////////////////////////////////////////////////////////////////////
db.productSet3.update({
        pName: "Lux Sandal",
        'pUnit.val': "small",
        'pUnit.unit': "size"
}, {
        $addToSet: {
                pPrice: {
                        price: 20,
                        unit: "Rs"
                }
        },
	$set:{
		dateCM : new Date()
	}
}, {
        upsert: true,
        multi: true
})
///////////////////////////////////////////////////////////////////////////////
////USECASE 1.4 A product with different price getting added and marked to delete other price details
///////////////////////////////////////////////////////////////////////////////
///////////A FLAG TO MARK THAT OTHERS PRICE BE DELETED/////////////////////////
db.productSet3.update({
        pName: "Lux Sandal",
        'pUnit.val': "small",
        'pUnit.unit': "size"
}, {
	$set:{
                pPrice: [{
                        price: 23,
                        unit: "Rs"
                }],
		dateCM : new Date()
	}
}, {
        upsert: true,
        multi: true
})
///////////////////////////////////////////////////////////////////////////////
///////$exists: true///////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 2.1 List every entry in DB/////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 2.2 Search product based on name///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 2.3 Search product based on name and units/////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 3.1 Edit a product name.[Note: They are unbounded while rendering]/
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 3.2 Edit a product unit////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 3.3 Edit a product price///////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 3.4 On deleting a unbounded priced product, the outdated price alone gets removed.
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 4.1 Adding a new product////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 4.2 Adding a product with different unit///////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 4.3 Adding new price to a product and marked to delete all old price
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 5.1 Ajax call based on characters entered and search inventory based on name and unit
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 6.1 Every bill should get saved to sales-order schema along with biller name
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 6.2 Every processed bill should be rendered for reference//////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 6.3 Searchable by date/////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 6.4 Searchable by bill amount//////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 6.5 Searchable by date and bill amount/////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
////USECASE 6.6 Searchable by biller name//////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
